unit CaseBranching;

interface
uses BaseOperator, Block, System.Generics.Collections, vcl.graphics;
type

  TCaseBranching = class(TBaseOperator)
  private
    FBlocks : TList<TBlock>;
  public
    destructor Destroy; override;
    constructor Create(AYStart, AXStart, AXLast, AmountCase: Integer; const AAction: string);
  end;

implementation

  destructor TCaseBranching.Destroy;
  var
    I : Integer;
  begin

    for I := 0 to FBlocks.Count - 1 do
      FBlocks[i].Destroy;

    FBlocks.Free;

    inherited;
  end;

  constructor TCaseBranching.Create(AYStart, AXStart, AXLast, AmountCase: Integer; const AAction: string);
  var
    I, BlockSize, BlockEnd: Integer;
  begin
    inherited Create(AYStart, AXStart, AXLast, AAction);

    FBlocks := TList<TBlock>.Create();

    BlockSize := (AXLast - AXStart) div AmountCase;

    for I := 0 to AmountCase - 2 do
    begin
      BlockEnd := AXStart + BlockSize;

      FBlocks.Add(TBlock.Create);
      AXStart := BlockEnd;
    end;
    FBlocks.Add(TBlock.Create);
  end;

end.
